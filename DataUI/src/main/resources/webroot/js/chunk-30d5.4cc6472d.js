(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-30d5"],{"41Be":function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a("Q2AE");function o(e){if(e&&e instanceof Array&&e.length>0){var t=e;return!!(n.a.getters&&n.a.getters.roles).some(function(e){return t.includes(e)})}return!1}},BvFL:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a("t3Un");function o(e){return Object(n.a)({url:"/api/getresourcelist",method:"post",params:e})}},ETUS:function(e,t,a){"use strict";a.r(t);var n=a("QbLZ"),o=a.n(n),i=a("BvFL"),s=a("Q2AE"),l=a("t3Un");var r=a("ZySA"),d=a("7Qib"),u=a("41Be"),c=a("L2JU"),p={directives:{waves:r.a},computed:o()({},Object(c.b)(["name","roles"])),filters:{statusFilter:function(e){return{published:"success",draft:"gray",deleted:"danger"}[e]}},data:function(){return{dataList:[],activeName:"first",appList_choosed:[],app_name_list:[],options:[{value:"全部",label:"全部"},{value:"横幅",label:"横幅"},{value:"开屏",label:"开屏"},{value:"插屏",label:"插屏"},{value:"视频",label:"视频"}],pickerOptions0:{disabledDate:function(e){return e.getTime()>Date.now()-864e4}},directives:{waves:r.a},downloadLoading:!1,aupu_chooseNamed:"选择项目",download_value:"",arpu_download_value:null,downloadParam:{start:void 0,end:void 0,name:void 0,namelist:"",list:[]},aupu_downloadParam:{start:void 0,end:void 0,name:"选择项目"},list:null,listLoading:!0,names:[]}},created:function(){this.fetchName(),this.fetchProject()},methods:{arpu_handleDownloadAll:function(){var e=this;this.dataList=[];var t=this;null!==this.arpu_download_value&&void 0!==this.arpu_download_value[0]&&void 0!==this.arpu_download_value[1]?this.arpu_download_value[1]-this.arpu_download_value[0]>5184e5?t.$notify({title:"",message:"时间范围最多选择7天",type:"warning",duration:2e3}):"选择项目"!==this.aupu_chooseNamed?(this.aupu_downloadParam.start=this.formatDate(new Date(this.arpu_download_value[0]),"yyyy-MM-dd"),this.aupu_downloadParam.end=this.formatDate(new Date(this.arpu_download_value[1]),"yyyy-MM-dd"),this.aupu_downloadParam.name=this.aupu_chooseNamed,console.log(this.aupu_chooseNamed),this.downloadLoading=!0,function(e){return Object(l.a)({url:"/arpufile_preview/"+e.start+"_"+e.end,method:"post",params:e,data:e})}(this.aupu_downloadParam).then(function(t){if(t){for(var a=t.data,n=e.initList(),o=[],i=0;i<n.length;i++){var s=[];s.push(n[i]);for(var l=0;l<a.length;l++)s.push(a[l][i]);o.push(s)}e.dataList=o,e.downloadLoading=!1}}).catch(function(e){console.log(e.toString()),t.downloadLoading=!1,t.$notify({title:"预览失败",message:"刷新试试",type:"error",duration:2e3})})):this.open3():this.open3()},arpu_handleDownloadAll1:function(){var e=this,t=this;if(null!==this.arpu_download_value&&void 0!==this.arpu_download_value[0])if(void 0!==this.arpu_download_value[1])if(this.arpu_download_value[1]-this.arpu_download_value[0]>5184e5)t.$notify({title:"",message:"时间范围最多选择7天",type:"warning",duration:2e3});else if(this.appList_choosed.length<1)this.open3();else for(var a=function(a){console.log("--------------"+e.appList_choosed[a].project_name),e.aupu_downloadParam.start=e.formatDate(new Date(e.arpu_download_value[0]),"yyyy-MM-dd"),e.aupu_downloadParam.end=e.formatDate(new Date(e.arpu_download_value[1]),"yyyy-MM-dd"),e.aupu_downloadParam.name=e.appList_choosed[a],e.downloadLoading=!0,function(e){return Object(l.a)({url:"/arpufile/"+e.start+"_"+e.end,method:"post",responseType:"blob",params:e,data:e})}(e.aupu_downloadParam).then(function(t){if(t){var n=window.URL.createObjectURL(new Blob([t])),o=document.createElement("a");o.style.display="none",o.href=n,o.setAttribute("download",e.appList_choosed[a].project_name+"_"+e.aupu_downloadParam.start+"_"+e.aupu_downloadParam.end+"_arpu.xls"),document.body.appendChild(o),o.click(),e.downloadLoading=!1}}).catch(function(e){console.log(e.toString()),t.downloadLoading=!1,t.$notify({title:"下载失败",message:"刷新试试",type:"error",duration:2e3})})},n=0;n<this.appList_choosed.length;n++)a(n);else this.open3();else this.open3()},fetchProject:function(){var e=this,t=this;this.listLoading=!0,Object(l.a)({url:"/projectList",method:"get"}).then(function(t){var a=t.data;if(e.checkPermission(["director"])||e.checkPermission(["admin"])||e.checkPermission(["operatorleader"])||e.checkPermission(["sdksuport"]))e.app_name_list=a;else{var n=[],o={username:s.a.getters&&s.a.getters.name};Object(i.a)(o).then(function(e){for(var t=e.data,o=0;o<a.length;o++)for(var i=0;i<t.length;i++)-1!=a[o].project_name.indexOf(t[i])&&n.push(a[o])}),e.app_name_list=n}}).catch(function(e){console.log(e),t.listLoading=!1})},getNum:function(e,t){var a=[];a.push(e);for(var n=e+1;n<=t;n++)a.push(n);return a},fetchName:function(){var e=this;if(Object(u.a)(["admin","leader","operator"])){var t=this;this.listLoading=!0,Object(l.a)({url:"/names",method:"get"}).then(function(t){e.names=t.data,e.listLoading=!1}).catch(function(e){t.listLoading=!1,console.log(e)})}else{var a={username:this.name},n=this;this.listLoading=!0,Object(i.a)(a).then(function(t){e.names=t.data,e.listLoading=!1}).catch(function(e){n.listLoading=!1,console.error(e)})}},checkPermission:u.a,parseTime:d.c,getdate:function(e,t){var a=[];for(a.push("全部"),a.push(this.formatDate(e,"yyyy-MM-dd"));e.setDate(e.getDate()+1),e.getTime()<t.getTime();)a.push(this.formatDate(e,"yyyy-MM-dd"));return a.includes(this.formatDate(t,"yyyy-MM-dd"))||a.push(this.formatDate(t,"yyyy-MM-dd")),a},formatDate:function(e,t){/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));var a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(var n in a)if(new RegExp("("+n+")").test(t)){var o=a[n]+"";t=t.replace(RegExp.$1,1===RegExp.$1.length?o:this.padLeftZero(o))}return t},padLeftZero:function(e){return("00"+e).substr(e.length)},open3:function(){this.$message({message:"请选择查询范围~",type:"warning"})},open4:function(){this.$message({message:"没有信息可以打印~",type:"warning"})},initList:function(){var e=[];e.push("日期"),e.push("总收益"),e.push("总活跃"),e.push("总arpu\t");var t="oppo";return e=this.initchannel(e,t),t="vivo",e=this.initchannel(e,t),t="华为",e=this.initchannel(e,t),t="4399",e=this.initchannel(e,t),t="qihoo",e=this.initchannel(e,t),t="魅族",e=this.initchannel(e,t),t="小米",e=this.initchannel(e,t),t="头条",e=this.initchannel(e,t),t="yyb",e=this.initchannel(e,t),t="中兴",e=this.initchannel(e,t),t="好游",e=this.initchannel(e,t),t="taptap",e=this.initchannel(e,t),t="三星",e=this.initchannel(e,t),t="联想",e=this.initchannel(e,t),t="九游",e=this.initchannel(e,t),t="百度",e=this.initchannel(e,t),t="天资",e=this.initchannel(e,t),t="努比亚",e=this.initchannel(e,t)},initchannel:function(e,t){return e.push(t+"-头条收益\t"),e.push(t+"-渠道收益\t"),e.push(t+"-广点通收益\t"),e.push(t+"-总收益\t"),e.push(t+"-活跃人数\t"),e.push(t+"-头条arpu\t"),e.push(t+"-渠道arpu\t"),e.push(t+"-广点通arpu\t"),e.push(t+"-总arpu\t"),e}}},h=(a("QWHg"),a("KHd+")),m=Object(h.a)(p,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container",staticStyle:{margin:"15px","margin-top":"-5px"}},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"预览",name:"first"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"timestamp","picker-options":e.pickerOptions0},model:{value:e.arpu_download_value,callback:function(t){e.arpu_download_value=t},expression:"arpu_download_value"}},[e._v(">\n        ")]),e._v(" "),a("el-select",{staticStyle:{"margin-right":"20px"},attrs:{"value-key":"project_name",placeholder:"选择项目",filterable:""},model:{value:e.aupu_chooseNamed,callback:function(t){e.aupu_chooseNamed=t},expression:"aupu_chooseNamed"}},e._l(e.app_name_list,function(e){return a("el-option",{key:e.project_name,attrs:{label:e.project_name,value:e}})})),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{loading:e.downloadLoading,type:"primary",icon:"el-icon-search"},on:{click:e.arpu_handleDownloadAll}},[e._v("\n          "+e._s("预览")+"\n        ")]),e._v(" "),a("table",{staticClass:"gridtable",staticStyle:{"margin-top":"20px"}},e._l(e.dataList,function(t,n){return a("tr",e._l(t,function(t){return a("td",[e._v(e._s(t))])}))}))],1),e._v(" "),a("el-tab-pane",{attrs:{label:"ARPU表下载",name:"second"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"timestamp","picker-options":e.pickerOptions0},model:{value:e.arpu_download_value,callback:function(t){e.arpu_download_value=t},expression:"arpu_download_value"}},[e._v(">\n        ")]),e._v(" "),a("el-select",{staticStyle:{"margin-right":"20px"},attrs:{multiple:"","multiple-limit":5,"collapse-tags":"","value-key":"project_name",placeholder:"选择项目",filterable:""},model:{value:e.appList_choosed,callback:function(t){e.appList_choosed=t},expression:"appList_choosed"}},e._l(e.app_name_list,function(e){return a("el-option",{key:e.project_name,attrs:{label:e.project_name,value:e}})})),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{loading:e.downloadLoading,type:"primary",icon:"el-icon-download"},on:{click:e.arpu_handleDownloadAll1}},[e._v("\n          "+e._s("下载arpu表")+"\n        ")])],1)],1),e._v(" "),a("br")],1)])},[],!1,null,null,null);m.options.__file="arputable.vue";t.default=m.exports},QWHg:function(e,t,a){"use strict";var n=a("sCq2");a.n(n).a},ZySA:function(e,t,a){"use strict";var n=a("P2sY"),o=a.n(n),i=(a("jUE0"),{bind:function(e,t){e.addEventListener("click",function(a){var n=o()({},t.value),i=o()({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},n),s=i.ele;if(s){s.style.position="relative",s.style.overflow="hidden";var l=s.getBoundingClientRect(),r=s.querySelector(".waves-ripple");switch(r?r.className="waves-ripple":((r=document.createElement("span")).className="waves-ripple",r.style.height=r.style.width=Math.max(l.width,l.height)+"px",s.appendChild(r)),i.type){case"center":r.style.top=l.height/2-r.offsetHeight/2+"px",r.style.left=l.width/2-r.offsetWidth/2+"px";break;default:r.style.top=(a.pageY-l.top-r.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",r.style.left=(a.pageX-l.left-r.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return r.style.backgroundColor=i.color,r.className="waves-ripple z-active",!1}},!1)}}),s=function(e){e.directive("waves",i)};window.Vue&&(window.waves=i,Vue.use(s)),i.install=s;t.a=i},jUE0:function(e,t,a){},sCq2:function(e,t,a){}}]);