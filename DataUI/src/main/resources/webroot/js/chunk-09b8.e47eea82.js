(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-09b8"],{"3Gho":function(t,a,e){"use strict";e.d(a,"c",function(){return s}),e.d(a,"g",function(){return n}),e.d(a,"e",function(){return r}),e.d(a,"f",function(){return o}),e.d(a,"d",function(){return l}),e.d(a,"b",function(){return d}),e.d(a,"a",function(){return c});var i=e("t3Un");function s(){return Object(i.a)({url:"/names",method:"get"})}function n(t){return Object(i.a)({url:"/file",method:"post",data:t,responseType:"blob"})}function r(t){return Object(i.a)({url:"/api/getresourcelist",method:"post",params:t})}function o(t){return Object(i.a)({url:"/arpufile/"+t.start+"_"+t.end,method:"post",responseType:"blob",params:t,data:t})}function l(){return Object(i.a)({url:"/projectList",method:"get"})}function d(t){return Object(i.a)({url:"/daily",method:"post",responseType:"blob",data:t})}function c(t){return Object(i.a)({url:"/dailyadtype",method:"post",responseType:"blob",data:t})}},"41Be":function(t,a,e){"use strict";e.d(a,"a",function(){return s});var i=e("Q2AE");function s(t){if(t&&t instanceof Array&&t.length>0){var a=t;return!!(i.a.getters&&i.a.getters.roles).some(function(t){return a.includes(t)})}return!1}},"8pL8":function(t,a,e){"use strict";var i=e("OggT");e.n(i).a},BmoD:function(t,a,e){},CeG8:function(t,a,e){"use strict";e.r(a);var i=e("QbLZ"),s=e.n(i),n=e("7BsA"),r=e.n(n),o=e("3Gho"),l=e("ZySA"),d=e("7Qib"),c=e("41Be"),u=e("L2JU"),p=e("nQns"),h=e("MT78"),_=e.n(h);e("gX0l");var v={props:{className:{type:String,default:"chart"},width:{type:String,default:"600px"},height:{type:String,default:"350px"},autoResize:{type:Boolean,default:!0},chartData:{type:Object,required:!0}},data:function(){return{chart:null,sidebarElm:null}},watch:{chartData:{deep:!0,handler:function(t){this.setOptions(t)}}},mounted:function(){var t=this;this.initChart(),this.autoResize&&(this.__resizeHandler=Object(d.a)(function(){t.chart&&t.chart.resize()},100),window.addEventListener("resize",this.__resizeHandler)),this.sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.sidebarElm&&this.sidebarElm.addEventListener("transitionend",this.sidebarResizeHandler)},beforeDestroy:function(){this.chart&&(this.autoResize&&window.removeEventListener("resize",this.__resizeHandler),this.sidebarElm&&this.sidebarElm.removeEventListener("transitionend",this.sidebarResizeHandler),this.chart.dispose(),this.chart=null)},methods:{sidebarResizeHandler:function(t){"width"===t.propertyName&&this.__resizeHandler()},setOptions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.firstData,e=t.secondData,i=t.thirdData,s=t.forthData,n=t.time,r=t.name;this.chart.setOption({xAxis:{data:n,boundaryGap:!1,axisTick:{show:!1}},grid:{left:10,right:10,bottom:20,top:30,containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"cross"},padding:[5,10]},yAxis:{axisTick:{show:!1}},legend:{data:[r[0],r[1],r[2],r[3]]},series:[{name:r[0],itemStyle:{normal:{label:{show:!0},color:"#33ADA0",lineStyle:{color:"#33ADA0",width:2,type:"solid",shadowColor:"#33ADA0",shadowBlur:1}}},smooth:!0,type:"line",data:a,animationDuration:2800,animationEasing:"cubicInOut"},{name:r[1],itemStyle:{normal:{color:"#F4A254",lineStyle:{color:"#F4A254",width:2,type:"Dotted line",shadowColor:"#F4A254",shadowBlur:10}}},smooth:!0,type:"line",data:e,animationDuration:2800,animationEasing:"cubicInOut"},{name:r[2],itemStyle:{normal:{color:"#33ADA0",lineStyle:{color:"#33ADA0",width:2}}},smooth:!0,type:"line",data:i,animationDuration:2800,animationEasing:"cubicInOut"},{name:r[3],smooth:!0,type:"line",itemStyle:{normal:{color:"#3888fa",lineStyle:{color:"#3888fa",width:2},areaStyle:{color:"#f3f8ff"}}},data:s,animationDuration:2800,animationEasing:"quadraticOut"}]})},initChart:function(){this.chart=_.a.init(this.$el,"macarons"),this.setOptions(this.chartData)}}},f=e("KHd+"),g=Object(f.a)(v,function(){var t=this.$createElement;return(this._self._c||t)("div",{class:this.className,style:{height:this.height,width:this.width}})},[],!1,null,null,null);g.options.__file="LineChart.vue";var m=g.exports,y={components:{CountTo:r.a,LineChart:m},directives:{waves:l.a},computed:s()({},Object(u.b)(["name","roles"])),filters:{statusFilter:function(t){return{published:"success",draft:"gray",deleted:"danger"}[t]}},data:function(){return{list1:{name:["总收益(单位:元)"],time:[],firstData:[]},statistical_data:{earned_to:0,earned_yes:1,earned_change:2,activeuser_to:6,activeuser_yes:7,activeuser_change:8,arpu_to:9,arpu_yes:10,arpu_change:11},arpuList:[],dauList:[],earnedList:[],daily_download_value:[],app_name_list:[],secondary_project:"选择项目",hackReset:!1,pickerOptions0:{disabledDate:function(t){return t.getTime()>Date.now()-864e4}},directives:{waves:l.a},downloadLoading:!1,download_value:"",downloadParam:{start:void 0,end:void 0,name:void 0,namelist:"",list:[]},list:null,listLoading:!0,names:[]}},created:function(){this.fetchName(),this.fetchProject()},mounted:function(){},methods:{initdate:function(){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.setTime(t.getTime()-864e5),this.daily_download_value.push(a),this.daily_download_value.push(t),this.daily_download1()},daily_download1:function(){var t=this,a=this;if(null!==this.daily_download_value)if(void 0!==this.daily_download_value[0])if(void 0!==this.daily_download_value[1]){this.downloadLoading=!0;var e={start:this.daily_download_value[0],end:this.daily_download_value[1],list:this.app_name_list};this.earnedList=[],this.dauList=[],this.arpuList=[],Object(p.a)(e).then(function(a){if(a){for(var e=a.data.arpu,i=0;i<e[0].length;i++){for(var s=[],n=0;n<e.length;n++)s.push(e[n][i]);t.arpuList.push(s)}for(var r=a.data.dau,o=0;o<r[0].length;o++){for(var l=[],d=0;d<r.length;d++)l.push(r[d][o]);t.dauList.push(l)}for(var c=0,u=0,p=1;p<t.dauList.length;p++)c+=parseInt(t.dauList[p][t.dauList[p].length-1]),u+=parseInt(t.dauList[p][t.dauList[p].length-2]);t.statistical_data.activeuser_to=c,t.statistical_data.activeuser_yes=u,t.statistical_data.activeuser_change=parseFloat((c-u)/c*100).toFixed(2),"-Infinity"==((c-u)/c*100).toFixed(2)?t.statistical_data.earned_change=-999:"Infinity"==((c-u)/c*100).toFixed(2)?t.statistical_data.earned_change=999:t.statistical_data.earned_change=parseFloat((c-u)/c*100).toFixed(2);for(var h=a.data.earned,_=[],v=[],f=0,g=0,m=1;m<h.length;m++){for(var y=0,b=0;b<h[m].length;b++)0===b?_.push(h[m][b]):y+=parseInt(h[m][b]);v.push(y)}t.list1.time=_,t.list1.firstData=v;for(var w=0;w<h[0].length;w++){for(var x=[],L=0;L<h.length;L++)x.push(h[L][w]);t.earnedList.push(x)}for(var C=0;C<t.earnedList.length;C++)if(C>0){f+=parseFloat(t.earnedList[C][t.earnedList[C].length-1]),g+=parseFloat(t.earnedList[C][t.earnedList[C].length-2]);for(var D=0,S=1;S<t.earnedList[C].length;S++)D+=parseFloat(t.earnedList[C][S]);t.earnedList[C].splice(1,0,D.toFixed(2))}else t.earnedList[C].splice(1,0,"统计");console.log(t.earnedList),t.statistical_data.earned_to=parseFloat(f.toFixed(2)),t.statistical_data.earned_yes=parseFloat(g.toFixed(2)),"-Infinity"==((f-g)/f*100).toFixed(2)?t.statistical_data.earned_change=-999:"Infinity"==((f-g)/f*100).toFixed(2)?t.statistical_data.earned_change=999:t.statistical_data.earned_change=((f-g)/f*100).toFixed(2);var E=t.statistical_data.earned_to/t.statistical_data.activeuser_to,F=t.statistical_data.earned_yes/t.statistical_data.activeuser_yes;t.statistical_data.arpu_to=parseFloat(E.toFixed(4)),t.statistical_data.arpu_yes=parseFloat(F.toFixed(4)),"-Infinity"==((E-F)/E).toFixed(2)?t.statistical_data.arpu_change=-999:"Infinity"==((E-F)/E).toFixed(2)?t.statistical_data.arpu_change=999:t.statistical_data.arpu_change=((E-F)/E).toFixed(2),t.downloadLoading=!1}}).catch(function(t){console.log(t.toString()+""),a.downloadLoading=!1,a.$notify({title:"获取失败",message:"刷新试试",type:"error",duration:2e3})})}else this.open3();else this.open3();else this.open3()},fetchProject:function(){var t=this,a=this;this.listLoading=!0,Object(o.d)().then(function(a){t.app_name_list=a.data,t.initdate()}).catch(function(t){console.log(t),a.listLoading=!1})},fetchName:function(){var t=this;if(Object(c.a)(["admin","leader","operator"])){var a=this;this.listLoading=!0,Object(o.c)().then(function(a){t.names=a.data,t.listLoading=!1}).catch(function(t){a.listLoading=!1,console.log(t)})}else{var e={username:this.name},i=this;this.listLoading=!0,Object(o.e)(e).then(function(a){t.names=a.data,t.listLoading=!1}).catch(function(t){i.listLoading=!1,console.error(t)})}},handleDownloadAll:function(){null!==this.download_value?(this.downloadParam.start=this.download_value[0],this.downloadParam.end=this.download_value[1],this.downloadParam.name=this.secondary_project,"选择项目"!==this.downloadParam.name&&void 0!==this.downloadParam.start&&void 0!==this.downloadParam.end?this.hackReset=!0:this.open3()):this.open3()},checkPermission:c.a,parseTime:d.c,getdate:function(t,a){var e=[];for(e.push("全部"),e.push(this.formatDate(t,"yyyy-MM-dd"));t.setDate(t.getDate()+1),t.getTime()<a.getTime();)e.push(this.formatDate(t,"yyyy-MM-dd"));return e.includes(this.formatDate(a,"yyyy-MM-dd"))||e.push(this.formatDate(a,"yyyy-MM-dd")),e},formatDate:function(t,a){/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));var e={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var i in e)if(new RegExp("("+i+")").test(a)){var s=e[i]+"";a=a.replace(RegExp.$1,1===RegExp.$1.length?s:this.padLeftZero(s))}return a},padLeftZero:function(t){return("00"+t).substr(t.length)},open3:function(){this.$message({message:"请选择查询范围~",type:"warning"})}}},b=(e("VKwx"),e("8pL8"),Object(f.a)(y,function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"app-container"},[e("div",{staticClass:"filter-container",staticStyle:{margin:"15px","margin-top":"-5px"}},[e("div",{staticStyle:{"margin-bottom":"0px"}},[e("el-row",{staticClass:"panel-group",staticStyle:{"margin-left":"15%"},attrs:{gutter:40}},[e("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[e("div",{staticClass:"card-panel"},[e("div",{staticClass:"card-panel-icon-wrapper icon-people"},[e("svg-icon",{attrs:{"icon-class":"earned1","class-name":"card-panel-icon"}})],1),t._v(" "),e("div",{staticClass:"card-panel-description"},[e("div",{staticClass:"card-panel-text"},[t._v("总收益")]),t._v(" "),e("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":t.statistical_data.earned_to,duration:10}})],1),t._v(" "),e("div",{staticStyle:{"margin-top":"20px","margin-left":"50px","font-size":"14px","font-weight":"bolder"}},[t._v("\n              对比总收益："+t._s(t.statistical_data.earned_yes)),e("br"),e("br"),t._v("\n              同比:\n              "),t.statistical_data.earned_change<0?e("span",{staticStyle:{color:"limegreen"}},[t._v("↘  "+t._s(t.statistical_data.earned_change)+"%")]):t._e(),t._v(" "),t.statistical_data.earned_change>0?e("span",{staticStyle:{color:"hotpink"}},[t._v("↗  "+t._s(t.statistical_data.earned_change)+"%")]):t._e(),t._v(" "),0==t.statistical_data.earned_change?e("span",{staticStyle:{color:"grey"}},[t._v("  ≈ 0 %")]):t._e()])])]),t._v(" "),e("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[e("div",{staticClass:"card-panel"},[e("div",{staticClass:"card-panel-icon-wrapper icon-people"},[e("svg-icon",{attrs:{"icon-class":"peoples","class-name":"card-panel-icon"}})],1),t._v(" "),e("div",{staticClass:"card-panel-description"},[e("div",{staticClass:"card-panel-text"},[t._v("总活跃")]),t._v(" "),e("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":t.statistical_data.activeuser_to,duration:10}})],1),t._v(" "),e("div",{staticStyle:{"margin-top":"20px","margin-left":"50px","font-size":"14px","font-weight":"bolder"}},[t._v("\n              对比总活跃："+t._s(t.statistical_data.activeuser_yes)),e("br"),e("br"),t._v("\n              同比:\n              "),t.statistical_data.activeuser_change<0?e("span",{staticStyle:{color:"limegreen"}},[t._v("↘  "+t._s(t.statistical_data.activeuser_change)+"%")]):t._e(),t._v(" "),t.statistical_data.activeuser_change>0?e("span",{staticStyle:{color:"hotpink"}},[t._v("↗  "+t._s(t.statistical_data.activeuser_change)+"%")]):t._e(),t._v(" "),0==t.statistical_data.activeuser_change?e("span",{staticStyle:{color:"grey"}},[t._v("  ≈ 0 %")]):t._e()])])]),t._v(" "),e("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[e("div",{staticClass:"card-panel"},[e("div",{staticClass:"card-panel-icon-wrapper icon-people"},[e("svg-icon",{attrs:{"icon-class":"arpu","class-name":"card-panel-icon"}})],1),t._v(" "),e("div",{staticClass:"card-panel-description"},[e("div",{staticClass:"card-panel-text"},[t._v("总ARPU")]),t._v(" "),e("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":t.statistical_data.arpu_to,duration:10}})],1),t._v(" "),e("div",{staticStyle:{"margin-top":"20px","margin-left":"50px","font-size":"14px","font-weight":"bolder"}},[t._v("\n              对比ARPU："+t._s(t.statistical_data.arpu_yes)),e("br"),e("br"),t._v("\n              同比:\n              "),t.statistical_data.arpu_change<0?e("span",{staticStyle:{color:"limegreen"}},[t._v("↘  "+t._s(t.statistical_data.arpu_change)+"%")]):t._e(),t._v(" "),t.statistical_data.arpu_change>0?e("span",{staticStyle:{color:"hotpink"}},[t._v("↗  "+t._s(t.statistical_data.arpu_change)+"%")]):t._e(),t._v(" "),0==t.statistical_data.arpu_change?e("span",{staticStyle:{color:"grey"}},[t._v("  ≈ 0 %")]):t._e()])])])],1)],1),t._v(" "),t._e(),t._v(" "),e("el-tabs",{staticStyle:{"margin-top":"20px",width:"70%","margin-left":"15%"},attrs:{type:"border-card"}},[e("el-tab-pane",{attrs:{label:"总收益"}},[e("table",{staticClass:"gridtable"},t._l(t.earnedList,function(a){return e("tr",t._l(a,function(a){return e("td",[t._v(t._s(a))])}))}))]),t._v(" "),e("el-tab-pane",{attrs:{label:"ARPU"}},[e("table",{staticClass:"gridtable"},t._l(t.arpuList,function(a){return e("tr",t._l(a,function(a){return e("td",[t._v(t._s(a))])}))}))]),t._v(" "),e("el-tab-pane",{attrs:{label:"DAU"}},[e("table",{staticClass:"gridtable"},t._l(t.dauList,function(a){return e("tr",t._l(a,function(a){return e("td",[t._v(t._s(a))])}))}))]),t._v(" "),e("el-tab-pane",{attrs:{label:"七日收益趋势"}},[e("div",{staticClass:"line-chart",staticStyle:{"margin-right":"100px","margin-top":"40px"}},[e("div",{staticClass:"font_cline",staticStyle:{"margin-left":"10px"}},[t._v("七日收益趋势")]),t._v(" "),e("el-row",{staticStyle:{background:"#fff",padding:"16px 16px 0","margin-bottom":"32px"}},[e("line-chart",{attrs:{"chart-data":t.list1,title:1}})],1)],1)])],1)],1)])},[],!1,null,"6f2b7694",null));b.options.__file="admin.vue";a.default=b.exports},OggT:function(t,a,e){},VKwx:function(t,a,e){"use strict";var i=e("BmoD");e.n(i).a},ZySA:function(t,a,e){"use strict";var i=e("P2sY"),s=e.n(i),n=(e("jUE0"),{bind:function(t,a){t.addEventListener("click",function(e){var i=s()({},a.value),n=s()({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},i),r=n.ele;if(r){r.style.position="relative",r.style.overflow="hidden";var o=r.getBoundingClientRect(),l=r.querySelector(".waves-ripple");switch(l?l.className="waves-ripple":((l=document.createElement("span")).className="waves-ripple",l.style.height=l.style.width=Math.max(o.width,o.height)+"px",r.appendChild(l)),n.type){case"center":l.style.top=o.height/2-l.offsetHeight/2+"px",l.style.left=o.width/2-l.offsetWidth/2+"px";break;default:l.style.top=(e.pageY-o.top-l.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",l.style.left=(e.pageX-o.left-l.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return l.style.backgroundColor=n.color,l.className="waves-ripple z-active",!1}},!1)}}),r=function(t){t.directive("waves",n)};window.Vue&&(window.waves=n,Vue.use(r)),n.install=r;a.a=n},jUE0:function(t,a,e){},nQns:function(t,a,e){"use strict";e.d(a,"a",function(){return s});var i=e("t3Un");function s(t){return Object(i.a)({url:"/daily_preview",method:"post",data:t})}}}]);