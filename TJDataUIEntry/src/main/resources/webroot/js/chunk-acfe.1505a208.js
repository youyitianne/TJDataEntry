(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-acfe"],{DfHK:function(t,e,a){},Urp3:function(t,e,a){"use strict";a.r(e);a("X4fA");var o=a("YXBG"),n=a("lwSp"),i={name:"DropzoneDemo",data:function(){return{respath:"http://192.168.1.144:8091/file?path=",fodderList:[],dataForm:{},channelPromo:{domains:[]},EditTable:[],promoListVisible:!1,promoEditVisible:!1,def_currentpage:1,search_currentpage:1,testModeLoading:!1,search_totalPages:0,def_paging:!0,search_paging:!1,searchDialog:!1,pageSize:20,totalPages:0,fetchForm:{appName:"",uid:"",packageName:""},testModeForm:{id:0,uid:"",appName:"",packageName:"",channel:"",mode:"",ad:""},tableData:[]}},mounted:function(){this.initTable(),this.initFodder()},methods:{fodderChange:function(t,e){console.log("选择器素材change",t),this.channelPromo.domains[e].promoIconUrl=this.channelPromo.domains[e].fodder.path1},appChange:function(t,e){console.log("选择器应用change",t),this.channelPromo.domains[e].promoName=this.channelPromo.domains[e].promoApp.appName},initFodder:function(){var t=this;Object(n.a)().then(function(e){if(3e3==e.repcode){for(var a=0;a<e.data.length;a++)e.data[a].path1=t.respath+e.data[a].fodderguid;console.log("",t.fodderList),t.fodderList=e.data}else t.$message.error("表格初始化失败！")}).catch(function(t){console.error(t)})},removeDomain:function(t){var e=this.channelPromo.domains.indexOf(t);-1!==e&&this.channelPromo.domains.splice(e,1)},addDomain:function(){this.channelPromo.domains.push({value:"",key:Date.now()})},initSelect:function(){var t=this;Object(o.b)().then(function(t){var e=JSON.parse(t.data);console.log(e)}).catch(function(e){t.$message({message:"初始化表格失败！",type:"warning"})})},showPromoEditDialog:function(t){var e=this;this.EditTable=[],this.promoEditVisible=!0;var a={appId:t.uid};Object(o.f)(a).then(function(t){if(3e3==t.repcode){for(var a=JSON.parse(t.data),o=0;o<a.rows.length;o++)if("channelPromo"===a.rows[o].system){var n=JSON.parse(a.rows[o].status);console.log("推广配置点击事件",n),e.EditTable=n}}else console.error(t.data),e.$message({message:"获取应用参数失败！",type:"warning"})}).catch(function(t){console.error(t),e.$message({message:"获取应用参数失败！",type:"warning"})})},showPromoListDialog:function(t){var e=this;this.channelPromo.domains=[],this.promoListVisible=!0;var a={appId:t.uid};Object(o.f)(a).then(function(t){if(3e3==t.repcode){for(var a=JSON.parse(t.data),o=0;o<a.rows.length;o++)if("channelPromo"===a.rows[o].system){var n=JSON.parse(a.rows[o].status);console.log("推广列表点击事件",n),e.channelPromo.domains=n}}else console.error(t.data),e.$message({message:"获取应用参数失败！",type:"warning"})}).catch(function(t){console.error(t),e.$message({message:"获取应用参数失败！",type:"warning"})})},searchAppList:function(t){var e=this,a={appName:this.fetchForm.appName,appId:this.fetchForm.uid,appPackageName:this.fetchForm.packageName,page:t,limit:this.pageSize};Object(o.h)(a).then(function(t){var a=JSON.parse(t.data);e.tableData=a.rows,e.search_totalPages=a.total}).catch(function(t){e.$message({message:"搜索失败！",type:"warning"})})},search_pageChange:function(t){this.def_currentpage=t,this.searchAppList(t)},searchData:function(){this.def_currentpage=1,this.searchAppList(1),this.def_paging=!1,this.search_paging=!0,this.searchDialog=!1},pageChange:function(t){this.def_currentpage=t,this.listapplist(t)},initTable:function(){this.def_currentpage=1,this.listapplist(1)},listapplist:function(t){var e=this,a={page:t,limit:this.pageSize};Object(o.d)(a).then(function(t){var a=JSON.parse(t.data);console.log("表格初始化",a.rows),e.tableData=a.rows,e.totalPages=a.total}).catch(function(t){e.$message({message:"初始化表格失败！",type:"warning"})})},flushList:function(){this.def_paging?this.pageChange(this.def_currentpage):this.search_pageChange(this.def_currentpage)}}},r=(a("kf2k"),a("KHd+")),l=Object(r.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"components-container"},[a("el-button",{staticStyle:{margin:"20px"},attrs:{type:"primary"},on:{click:function(e){t.searchDialog=!0}}},[t._v("搜索应用")]),t._v(" "),a("el-dialog",{attrs:{title:"搜索应用",visible:t.searchDialog,width:"30%"},on:{"update:visible":function(e){t.searchDialog=e}}},[a("el-form",{ref:"fetchForm",attrs:{model:t.fetchForm,"label-width":"200px"}},[a("el-form-item",{attrs:{label:"应用名 : "}},[a("el-input",{staticStyle:{width:"200px"},attrs:{clearable:""},model:{value:t.fetchForm.appName,callback:function(e){t.$set(t.fetchForm,"appName",e)},expression:"fetchForm.appName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"屏蔽key : "}},[a("el-input",{staticStyle:{width:"200px"},attrs:{clearable:""},model:{value:t.fetchForm.uid,callback:function(e){t.$set(t.fetchForm,"uid",e)},expression:"fetchForm.uid"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"包名 : "}},[a("el-input",{staticStyle:{width:"200px"},attrs:{clearable:""},model:{value:t.fetchForm.packageName,callback:function(e){t.$set(t.fetchForm,"packageName",e)},expression:"fetchForm.packageName"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.searchData}},[t._v("搜索")])],1)],1),t._v(" "),a("el-card",{attrs:{shadow:"always"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{height:"730",border:"",data:t.tableData}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"appName",label:"应用名",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"uid",label:"屏蔽key",width:"300"}}),t._v(" "),a("el-table-column",{attrs:{prop:"packageName",label:"应用包名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"channel",label:"渠道"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.showPromoEditDialog(e.row)}}},[t._v("推广配置")]),t._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.showPromoListDialog(e.row)}}},[t._v("推广列表")])]}}])})],1),t._v(" "),t.def_paging?a("el-pagination",{attrs:{"page-size":t.pageSize,layout:"prev, pager, next",total:t.totalPages,"current-page":t.def_currentpage},on:{"current-change":t.pageChange}}):t._e(),t._v(" "),t.search_paging?a("el-pagination",{attrs:{"page-size":t.pageSize,layout:"prev, pager, next",total:t.search_totalPages,"current-page":t.search_currentpage},on:{"current-change":t.search_pageChange}}):t._e()],1),t._v(" "),a("el-dialog",{attrs:{title:"推广配置",visible:t.promoEditVisible,width:"90%"},on:{"update:visible":function(e){t.promoEditVisible=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{height:"630",border:"",data:t.EditTable}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"promoName",label:"推广应用名",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"channelPackage",label:"渠道包名",width:"280"}}),t._v(" "),a("el-table-column",{attrs:{prop:"channelRule",label:"跳转规则",width:"450"}}),t._v(" "),a("el-table-column",{attrs:{prop:"promoPackageName",label:"推广包名"}}),t._v(" "),a("el-table-column",{attrs:{width:"350",prop:"promoIconUrl",label:"推广图片链接"}}),t._v(" "),a("el-table-column",{attrs:{width:"80",prop:"promoValue",label:"推广权值"}})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"推广列表",visible:t.promoListVisible,width:"90%"},on:{"update:visible":function(e){t.promoListVisible=e}}},[a("el-button",{staticStyle:{"margin-bottom":"15px"},attrs:{type:"primary"},on:{click:t.addDomain}},[t._v("新增参数")]),t._v(" "),a("el-form",{ref:"dataForm",staticStyle:{"margin-left":"50px"},attrs:{model:t.channelPromo,"label-position":"left","label-width":"100px",inline:!0,"status-icon":""}},t._l(t.channelPromo.domains,function(e,o){return a("el-form-item",{key:e.channelRule+o},[a("div",[a("span",{staticStyle:{"font-weight":"700","font-family":"Microsoft YaHei",font:"14px bolder",color:"#606266"}},[t._v("推广应用名：")]),t._v(" "),a("el-input",{staticStyle:{width:"200px","margin-right":"5px"},attrs:{placeholder:"必填"},model:{value:e.promoName,callback:function(a){t.$set(e,"promoName",a)},expression:"domain.promoName"}}),t._v(" "),a("span",{staticStyle:{"font-weight":"700","font-family":"Microsoft YaHei",font:"14px bolder",color:"#606266"}},[t._v("渠道包名：")]),t._v(" "),a("el-input",{staticStyle:{width:"200px","margin-right":"5px"},attrs:{placeholder:"必填"},model:{value:e.channelPackage,callback:function(a){t.$set(e,"channelPackage",a)},expression:"domain.channelPackage"}}),t._v(" "),a("span",{staticStyle:{"font-weight":"700","font-family":"Microsoft YaHei",font:"14px bolder",color:"#606266"}},[t._v("跳转规则：")]),t._v(" "),a("el-input",{staticStyle:{width:"200px","margin-right":"5px"},attrs:{placeholder:"必填"},model:{value:e.channelRule,callback:function(a){t.$set(e,"channelRule",a)},expression:"domain.channelRule"}}),t._v(" "),a("span",{staticStyle:{"font-weight":"700","font-family":"Microsoft YaHei",font:"14px bolder",color:"#606266"}},[t._v("推广包名：")]),t._v(" "),a("el-input",{staticStyle:{width:"200px","margin-right":"5px"},attrs:{placeholder:"必填"},model:{value:e.promoPackageName,callback:function(a){t.$set(e,"promoPackageName",a)},expression:"domain.promoPackageName"}}),t._v(" "),a("span",{staticStyle:{"font-weight":"700","font-family":"Microsoft YaHei",font:"14px bolder",color:"#606266"}},[t._v("推广图片链接：")]),t._v(" "),a("el-input",{staticStyle:{width:"200px","margin-right":"5px"},attrs:{placeholder:"必填"},model:{value:e.promoIconUrl,callback:function(a){t.$set(e,"promoIconUrl",a)},expression:"domain.promoIconUrl"}}),t._v(" "),a("span",{staticStyle:{"font-weight":"700","font-family":"Microsoft YaHei",font:"14px bolder",color:"#606266"}},[t._v("推广权值：")]),t._v(" "),a("el-input",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{placeholder:"必填"},model:{value:e.promoValue,callback:function(a){t.$set(e,"promoValue",a)},expression:"domain.promoValue"}}),t._v(" "),a("span",{staticStyle:{"font-weight":"700","font-family":"Microsoft YaHei",font:"14px bolder",color:"#606266"}},[t._v("素材：")]),t._v(" "),a("el-select",{staticStyle:{width:"400px"},attrs:{placeholder:"请选择",filterable:"","value-key":"fodderguid"},on:{change:function(a){t.fodderChange(e,o)}},model:{value:e.fodder,callback:function(a){t.$set(e,"fodder",a)},expression:"domain.fodder"}},t._l(t.fodderList,function(e){return a("el-option",{key:e.fodderguid,attrs:{label:e.fodderguid,value:e}},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.fodderguid))]),t._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[a("img",{attrs:{src:e.path1,width:"50",height:"50"}})])])})),t._v(" "),a("span",{staticStyle:{"font-weight":"700","font-family":"Microsoft YaHei",font:"14px bolder",color:"#606266"}},[t._v("应用：")]),t._v(" "),a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择",filterable:"","value-key":"uid"},on:{change:function(a){t.appChange(e,o)}},model:{value:e.promoApp,callback:function(a){t.$set(e,"promoApp",a)},expression:"domain.promoApp"}},t._l(t.tableData,function(e,o){return a("el-option",{key:e.uid,attrs:{label:e.appName,value:e}},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.appName))]),t._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.channel))])])})),t._v(" "),a("el-button",{staticClass:"el-button el-button--danger el-button--mini",staticStyle:{"margin-right":"35px"},on:{click:function(a){a.preventDefault(),t.removeDomain(e)}}},[t._v("删除\n          ")])],1)])})),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.promoListVisible=!1}}},[t._v(t._s("取消"))]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){}}},[t._v(t._s("确认"))])],1)],1)],1)},[],!1,null,"6cb16b7a",null);l.options.__file="channelPromoEdit.vue";e.default=l.exports},YXBG:function(t,e,a){"use strict";a.d(e,"e",function(){return n}),a.d(e,"g",function(){return i}),a.d(e,"d",function(){return r}),a.d(e,"b",function(){return l}),a.d(e,"h",function(){return s}),a.d(e,"f",function(){return c}),a.d(e,"a",function(){return p}),a.d(e,"c",function(){return d});var o=a("t3Un");function n(t){return Object(o.a)({url:"/api/system/getip",method:"post",data:t})}function i(t){return Object(o.a)({url:"/api/system/postip",method:"post",data:t})}function r(t){return Object(o.a)({url:"/api/system/getapplist",method:"post",data:t})}function l(){return Object(o.a)({url:"/api/system/applist",method:"post"})}function s(t){return Object(o.a)({url:"/api/system/searchapp",method:"post",data:t})}function c(t){return Object(o.a)({url:"/api/system/getparams",method:"post",data:t})}function p(t){return Object(o.a)({url:"/api/system/addparams",method:"post",data:t})}function d(t){return Object(o.a)({url:"/api/system/editparams",method:"post",data:t})}},kf2k:function(t,e,a){"use strict";var o=a("DfHK");a.n(o).a},lwSp:function(t,e,a){"use strict";a.d(e,"b",function(){return n}),a.d(e,"a",function(){return i});var o=a("t3Un");function n(t){return Object(o.a)({url:"/api/system/addfodderinfo",method:"post",data:t})}function i(){return Object(o.a)({url:"/api/system/listfodderinfo",method:"get"})}}}]);