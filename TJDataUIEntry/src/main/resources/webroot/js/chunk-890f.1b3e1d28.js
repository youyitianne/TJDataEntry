(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-890f"],{"/LvC":function(t,e,a){},"3Gho":function(t,e,a){"use strict";a.d(e,"b",function(){return o}),a.d(e,"f",function(){return i}),a.d(e,"d",function(){return s}),a.d(e,"c",function(){return r}),a.d(e,"a",function(){return d}),a.d(e,"e",function(){return l});var n=a("t3Un");function o(){return Object(n.a)({url:"/names",method:"get"})}function i(t){return Object(n.a)({url:"/file",method:"post",data:t,responseType:"blob"})}function s(t){return Object(n.a)({url:"/api/getresourcelist",method:"post",params:t})}function r(){return Object(n.a)({url:"/projectList",method:"get"})}function d(t){return Object(n.a)({url:"/daily",method:"post",responseType:"blob",data:t})}function l(t){return Object(n.a)({url:"/arpufile_preview/"+t.start+"_"+t.end,method:"post",params:t,data:t})}},"41Be":function(t,e,a){"use strict";a.d(e,"a",function(){return o});var n=a("Q2AE");function o(t){if(t&&t instanceof Array&&t.length>0){var e=t;return!!(n.a.getters&&n.a.getters.roles).some(function(t){return e.includes(t)})}return!1}},"F3X/":function(t,e,a){"use strict";var n=a("/LvC");a.n(n).a},"W+dE":function(t,e,a){"use strict";a.r(e);var n=a("QbLZ"),o=a.n(n),i=a("3Gho"),s=a("ZySA"),r=a("7Qib"),d=a("41Be"),l=a("L2JU"),c=a("nQns"),u={directives:{waves:s.a},computed:o()({},Object(l.b)(["name","roles"])),filters:{statusFilter:function(t){return{published:"success",draft:"gray",deleted:"danger"}[t]}},data:function(){return{arpuList:[],dauList:[],earnedList:[],daily_download_value:[],app_name_list:[],secondary_project:"选择项目",hackReset:!1,pickerOptions0:{disabledDate:function(t){return t.getTime()>Date.now()-864e4}},directives:{waves:s.a},downloadLoading:!1,download_value:"",downloadParam:{start:void 0,end:void 0,name:void 0,namelist:"",list:[]},list:null,listLoading:!0,names:[]}},created:function(){this.fetchName(),this.fetchProject()},methods:{daily_download:function(){var t=this,e=this;if(null!==this.daily_download_value)if(void 0!==this.daily_download_value[0])if(void 0!==this.daily_download_value[1]){this.downloadLoading=!0;var a={start:this.daily_download_value[0],end:this.daily_download_value[1],list:this.app_name_list};Object(i.a)(a).then(function(e){if(e){var n=window.URL.createObjectURL(new Blob([e])),o=document.createElement("a");o.style.display="none",o.href=n,o.setAttribute("download",a.start+"_"+a.end+"_产品收益表.xls"),document.body.appendChild(o),o.click(),t.downloadLoading=!1}}).catch(function(t){console.log(t.toString()+"asdasdas"),e.downloadLoading=!1,e.$notify({title:"下载失败",message:"刷新试试",type:"error",duration:2e3})})}else this.open3();else this.open3();else this.open3()},daily_download1:function(){var t=this,e=this;if(null!==this.daily_download_value)if(void 0!==this.daily_download_value[0])if(void 0!==this.daily_download_value[1]){this.downloadLoading=!0;var a={start:this.daily_download_value[0],end:this.daily_download_value[1],list:this.app_name_list};this.earnedList=[],this.dauList=[],this.arpuList=[],Object(c.a)(a).then(function(e){if(e){for(var a=e.data.arpu,n=0;n<a[0].length;n++){for(var o=[],i=0;i<a.length;i++)o.push(a[i][n]);t.arpuList.push(o)}for(var s=e.data.dau,r=0;r<s[0].length;r++){for(var d=[],l=0;l<s.length;l++)d.push(s[l][r]);t.dauList.push(d)}for(var c=e.data.earned,u=0;u<c[0].length;u++){for(var h=[],p=0;p<c.length;p++)h.push(c[p][u]);t.earnedList.push(h)}t.downloadLoading=!1}}).catch(function(t){console.log(t.toString()+"asdasdas"),e.downloadLoading=!1,e.$notify({title:"下载失败",message:"刷新试试",type:"error",duration:2e3})})}else this.open3();else this.open3();else this.open3()},fetchProject:function(){var t=this,e=this;this.listLoading=!0,Object(i.c)().then(function(e){t.app_name_list=e.data}).catch(function(t){console.log(t),e.listLoading=!1})},fetchName:function(){var t=this;if(Object(d.a)(["admin","leader","operator"])){var e=this;this.listLoading=!0,Object(i.b)().then(function(e){t.names=e.data,t.listLoading=!1}).catch(function(t){e.listLoading=!1,console.log(t)})}else{var a={username:this.name},n=this;this.listLoading=!0,Object(i.d)(a).then(function(e){t.names=e.data,t.listLoading=!1}).catch(function(t){n.listLoading=!1,console.error(t)})}},handleDownloadAll:function(){null!==this.download_value?(this.downloadParam.start=this.download_value[0],this.downloadParam.end=this.download_value[1],this.downloadParam.name=this.secondary_project,"选择项目"!==this.downloadParam.name&&void 0!==this.downloadParam.start&&void 0!==this.downloadParam.end?this.hackReset=!0:this.open3()):this.open3()},checkPermission:d.a,parseTime:r.c,getdate:function(t,e){var a=[];for(a.push("全部"),a.push(this.formatDate(t,"yyyy-MM-dd"));t.setDate(t.getDate()+1),t.getTime()<e.getTime();)a.push(this.formatDate(t,"yyyy-MM-dd"));return a.includes(this.formatDate(e,"yyyy-MM-dd"))||a.push(this.formatDate(e,"yyyy-MM-dd")),a},formatDate:function(t,e){/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));var a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var n in a)if(new RegExp("("+n+")").test(e)){var o=a[n]+"";e=e.replace(RegExp.$1,1===RegExp.$1.length?o:this.padLeftZero(o))}return e},padLeftZero:function(t){return("00"+t).substr(t.length)},open3:function(){this.$message({message:"请选择查询范围~",type:"warning"})}}},h=(a("F3X/"),a("KHd+")),p=Object(h.a)(u,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[t.checkPermission(["admin","operatorleader","director"])?a("div",{staticClass:"filter-container",staticStyle:{margin:"15px","margin-top":"-5px"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd","picker-options":t.pickerOptions0},model:{value:t.daily_download_value,callback:function(e){t.daily_download_value=e},expression:"daily_download_value"}},[t._v(">\n    ")]),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{loading:t.downloadLoading,type:"primary",icon:"el-icon-download"},on:{click:t.daily_download1}},[t._v("\n      "+t._s("预览")+"\n    ")]),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{loading:t.downloadLoading,type:"primary",icon:"el-icon-download"},on:{click:t.daily_download}},[t._v("\n      "+t._s("下载收益表")+"\n    ")]),t._v(" "),a("el-tabs",{staticStyle:{"margin-top":"20px"},attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"总收益预览"}},[a("table",{staticClass:"gridtable"},t._l(t.earnedList,function(e){return a("tr",t._l(e,function(e){return a("td",[t._v(t._s(e))])}))}))]),t._v(" "),a("el-tab-pane",{attrs:{label:"ARPU预览"}},[a("table",{staticClass:"gridtable"},t._l(t.arpuList,function(e){return a("tr",t._l(e,function(e){return a("td",[t._v(t._s(e))])}))}))]),t._v(" "),a("el-tab-pane",{attrs:{label:"DAU预览"}},[a("table",{staticClass:"gridtable"},t._l(t.dauList,function(e){return a("tr",t._l(e,function(e){return a("td",[t._v(t._s(e))])}))}))])],1)],1):t._e()])},[],!1,null,null,null);p.options.__file="earnedtable.vue";e.default=p.exports},ZySA:function(t,e,a){"use strict";var n=a("P2sY"),o=a.n(n),i=(a("jUE0"),{bind:function(t,e){t.addEventListener("click",function(a){var n=o()({},e.value),i=o()({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},n),s=i.ele;if(s){s.style.position="relative",s.style.overflow="hidden";var r=s.getBoundingClientRect(),d=s.querySelector(".waves-ripple");switch(d?d.className="waves-ripple":((d=document.createElement("span")).className="waves-ripple",d.style.height=d.style.width=Math.max(r.width,r.height)+"px",s.appendChild(d)),i.type){case"center":d.style.top=r.height/2-d.offsetHeight/2+"px",d.style.left=r.width/2-d.offsetWidth/2+"px";break;default:d.style.top=(a.pageY-r.top-d.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",d.style.left=(a.pageX-r.left-d.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return d.style.backgroundColor=i.color,d.className="waves-ripple z-active",!1}},!1)}}),s=function(t){t.directive("waves",i)};window.Vue&&(window.waves=i,Vue.use(s)),i.install=s;e.a=i},jUE0:function(t,e,a){},nQns:function(t,e,a){"use strict";a.d(e,"a",function(){return o});var n=a("t3Un");function o(t){return Object(n.a)({url:"/daily_preview",method:"post",data:t})}}}]);