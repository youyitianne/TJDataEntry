(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-8e21"],{"41Be":function(e,t,a){"use strict";a.d(t,"a",function(){return i});var r=a("Q2AE");function i(e){if(e&&e instanceof Array&&e.length>0){var t=e;return!!(r.a.getters&&r.a.getters.roles).some(function(e){return t.includes(e)})}return!1}},"Gpy/":function(e,t,a){"use strict";var r=a("Hxec");a.n(r).a},Hxec:function(e,t,a){},R3PJ:function(e,t,a){"use strict";a.d(t,"b",function(){return i}),a.d(t,"a",function(){return n});var r=a("t3Un");function i(e){return Object(r.a)({url:"/api/publish_delete",method:"post",data:e})}function n(e){return Object(r.a)({url:"/api/projectconfig_publish/limit",method:"get",params:e})}},ZySA:function(e,t,a){"use strict";var r=a("P2sY"),i=a.n(r),n=(a("jUE0"),{bind:function(e,t){e.addEventListener("click",function(a){var r=i()({},t.value),n=i()({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},r),l=n.ele;if(l){l.style.position="relative",l.style.overflow="hidden";var s=l.getBoundingClientRect(),o=l.querySelector(".waves-ripple");switch(o?o.className="waves-ripple":((o=document.createElement("span")).className="waves-ripple",o.style.height=o.style.width=Math.max(s.width,s.height)+"px",l.appendChild(o)),n.type){case"center":o.style.top=s.height/2-o.offsetHeight/2+"px",o.style.left=s.width/2-o.offsetWidth/2+"px";break;default:o.style.top=(a.pageY-s.top-o.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",o.style.left=(a.pageX-s.left-o.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return o.style.backgroundColor=n.color,o.className="waves-ripple z-active",!1}},!1)}}),l=function(e){e.directive("waves",n)};window.Vue&&(window.waves=n,Vue.use(l)),n.install=l;t.a=n},jUE0:function(e,t,a){},vKUr:function(e,t,a){"use strict";a.r(t);var r=a("YEIV"),i=a.n(r),n=a("ZySA"),l=(a("7Qib"),a("41Be")),s=a("R3PJ"),o=(a("Q2AE"),a("sxGJ"));if(!o)throw new Error("you should npm install `clipboard` --save at first ");var c={bind:function(e,t){if("success"===t.arg)e._v_clipboard_success=t.value;else if("error"===t.arg)e._v_clipboard_error=t.value;else{var a=new o(e,{text:function(){return t.value},action:function(){return"cut"===t.arg?"cut":"copy"}});a.on("success",function(t){var a=e._v_clipboard_success;a&&a(t)}),a.on("error",function(t){var a=e._v_clipboard_error;a&&a(t)}),e._v_clipboard=a}},update:function(e,t){"success"===t.arg?e._v_clipboard_success=t.value:"error"===t.arg?e._v_clipboard_error=t.value:(e._v_clipboard.text=function(){return t.value},e._v_clipboard.action=function(){return"cut"===t.arg?"cut":"copy"})},unbind:function(e,t){"success"===t.arg?delete e._v_clipboard_success:"error"===t.arg?delete e._v_clipboard_error:(e._v_clipboard.destroy(),delete e._v_clipboard)}},p=function(e){e.directive("Clipboard",c)};window.Vue&&(window.clipboard=c,Vue.use(p)),c.install=p;var d={directives:{clipboard:c},filters:{statusFilter:function(e){return{published:"success",draft:"gray",deleted:"danger"}[e]}},data:function(){var e;return e={pageSize:30,totalPages:0,currentPage:1,link:"",dialogForm:{},projectObject:{},dialogVisible:!1,secondary_package:"",value:[],spanArr:[],checked:!0,secondary_channel:"",secondary_game:"",listLoading:!0,names:[],directives:{waves:n.a},layout:"",list:null},i()(e,"listLoading",!1),i()(e,"names",[]),i()(e,"hidlist",""),i()(e,"channel_mark_list_dia",[]),i()(e,"getRowKeys",function(e){return e.id}),e},created:function(){this.routeWithParam(),this.pageChange(1)},methods:{searchTable:function(){this.pageChange(1)},pageChange:function(e){var t=this;this.currentPage=e;var a=this,r={page:e,limit:this.pageSize,appName:this.secondary_game,channelName:this.secondary_channel,packageName:this.secondary_package};Object(s.a)(r).then(function(e){3e3===e.repcode?(t.hidlist=e.data,t.getDatawithParam(),t.totalPages=e.total):a.$notify({title:"失败",message:"请刷新页面后重试",type:"error",duration:2e3})}).catch(function(e){console.error(e),a.$notify({title:"失败",message:"请刷新页面后重试",type:"error",duration:2e3})})},clipboardSuccess:function(){this.$message({message:"复制成功",type:"success",duration:1500})},handleView:function(e){console.log(e),this.link="http://system.tomatojoy.com:8089/sdkapi?package_name="+e.package_name+"&channel_mark="+e.channel_mark,this.dialogForm=e,this.getSpanArr(e.paramter),this.projectObject=e,this.dialogVisible=!0},routeWithParam:function(){var e=this.$route.query.package_name;void 0!==e&&(this.secondary_package=e);var t=this.$route.query.channel;void 0!==t&&(this.secondary_channel=t)},handleDelete:function(e){var t=this,a=this;this.$confirm("是否确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s.b)(e).then(function(e){t.pageChange(t.currentPage)}).catch(function(e){a.$notify({title:"删除失败",message:"请刷新页面后重试",type:"error",duration:2e3})})})},initchannel:function(){var e=this;getChannel().then(function(t){e.channel_mark_list_dia=t.data})},getDatawithParam:function(){this.listLoading=!0;var e=this.secondary_channel,t=[];if(""!=e)for(var a=0;a<this.hidlist.length;a++)-1!=this.hidlist[a].channel_mark.search(e)&&t.push(this.hidlist[a]);else t=this.hidlist;var r=this.secondary_game,i=[];if(""!=r)for(var n=0;n<t.length;n++)-1!=t[n].app_name.search(r)&&i.push(t[n]);else i=t;var l=[];if(!0===this.checked)for(var s=0;s<i.length;s++){for(var o=!0,c=0;c<l.length;c++)i[s].channel_mark===l[c].channel_mark&&i[s].package_name===l[c].package_name&&(o=!1);o&&l.push(i[s])}else l=i;var p=this.secondary_package,d=[];if(""!=p)for(var u=0;u<l.length;u++)-1!=l[u].package_name.search(p)&&d.push(l[u]);else d=l;this.list=d,this.listLoading=!1},checkPermission:l.a,getSpanArr:function(e){this.spanArr.length=0;for(var t=0;t<e.length;t++)0===t?(this.spanArr.push(1),this.pos=0):e[t].mark===e[t-1].mark?(this.spanArr[this.pos]+=1,this.spanArr.push(0)):(this.spanArr.push(1),this.pos=t)},objectSpanMethod:function(e){e.row,e.column;var t=e.rowIndex;if(0===e.columnIndex){var a=this.spanArr[t];return{rowspan:a,colspan:a>0?1:0}}}}},u=(a("Gpy/"),a("KHd+")),m=Object(u.a)(d,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container",staticStyle:{margin:"15px","margin-top":"-5px"}},[a("span",{staticStyle:{"margin-left":"15px","margin-right":"5px"}},[e._v("应用名:")]),e._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:""},model:{value:e.secondary_game,callback:function(t){e.secondary_game=t},expression:"secondary_game"}}),e._v(" "),a("span",{staticStyle:{"margin-left":"15px","margin-right":"5px"}},[e._v("渠道:")]),e._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:""},model:{value:e.secondary_channel,callback:function(t){e.secondary_channel=t},expression:"secondary_channel"}}),e._v(" "),a("span",{staticStyle:{"margin-left":"15px","margin-right":"5px"}},[e._v("包名:")]),e._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:""},model:{value:e.secondary_package,callback:function(t){e.secondary_package=t},expression:"secondary_package"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"20px"},on:{click:e.searchTable}},[e._v("搜索")]),e._v(" "),a("el-checkbox",{staticStyle:{"margin-left":"15px"},attrs:{border:""},on:{change:e.getDatawithParam},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("展示最新配置表 ")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{height:"750",data:e.list,"element-loading-text":"Loading","row-key":e.getRowKeys,fit:"",stripe:"",border:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"发布时间",prop:"date1",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{label:"应用名",prop:"app_name",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"渠道",prop:"channel_mark",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{label:"包名",prop:"package_name",width:"300px"}}),e._v(" "),a("el-table-column",{attrs:{label:"外部版本-在线",prop:"version_update",width:"120px"}}),e._v(" "),a("el-table-column",{attrs:{label:"内部版本-更新",prop:"versioncode_update_version",width:"120px"}}),e._v(" "),a("el-table-column",{attrs:{label:"备注",prop:"note"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"150px","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.checkPermission(["director","admin","sdksuport","operatorleader"])?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){e.handleDelete(t.row)}}},[e._v(e._s("删除"))]):e._e(),e._v(" "),a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){e.handleView(t.row)}}},[e._v(e._s("查看"))])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"page-size":e.pageSize,layout:"prev, pager, next",total:e.totalPages,"current-page":e.currentPage},on:{"current-change":e.pageChange}}),e._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"详情",visible:e.dialogVisible,width:"70%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:"",model:e.dialogForm,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"时间:"}},[a("span",[e._v(e._s(e.dialogForm.date1))])]),e._v(" "),a("el-form-item",{attrs:{label:"出表人"}},[a("span",[e._v(e._s(e.dialogForm.publisher))])]),e._v(" "),a("el-form-item",{attrs:{label:"游戏名:"}},[a("span",[e._v(e._s(e.dialogForm.app_name))])]),e._v(" "),a("el-form-item",{attrs:{label:"包名:"}},[a("span",[e._v(e._s(e.dialogForm.package_name))])]),e._v(" "),a("el-form-item",{attrs:{label:"渠道标记:"}},[a("span",[e._v(e._s(e.dialogForm.channel_mark))])]),e._v(" "),a("el-form-item",{attrs:{label:"外部版本-在线:"}},[a("span",[e._v(e._s(e.dialogForm.version_online))])]),e._v(" "),a("el-form-item",{attrs:{label:"内部版本-在线:"}},[a("span",[e._v(e._s(e.dialogForm.versioncode_online_version))])]),e._v(" "),a("el-form-item",{attrs:{label:"外部版本-更新:"}},[a("span",[e._v(e._s(e.dialogForm.version_update))])]),e._v(" "),a("el-form-item",{attrs:{label:"内部版本_更新:"}},[a("span",[e._v(e._s(e.dialogForm.versioncode_update_version))])]),e._v(" "),a("el-form-item",{attrs:{label:"icon:"}},[a("span",[e._v(e._s(e.dialogForm.icon))])]),e._v(" "),a("el-form-item",{attrs:{label:"splash:"}},[a("span",[e._v(e._s(e.dialogForm.splash))])]),e._v(" "),a("el-form-item",{attrs:{label:"keystorePath:"}},[a("span",[e._v(e._s(e.dialogForm.keystorePath))])]),e._v(" "),a("el-form-item",{attrs:{label:"keystorePass:"}},[a("span",[e._v(e._s(e.dialogForm.keystorePass))])]),e._v(" "),a("el-form-item",{attrs:{label:"keyaliasName:"}},[a("span",[e._v(e._s(e.dialogForm.keyaliasName))])]),e._v(" "),a("el-form-item",{attrs:{label:"keyaliasPass:"}},[a("span",[e._v(e._s(e.dialogForm.keyaliasPass))])]),e._v(" "),a("el-form-item",{attrs:{label:"MD5:"}},[a("span",[e._v(e._s(e.dialogForm.MD5))])]),e._v(" "),a("el-form-item",{attrs:{label:"SHA1:"}},[a("span",[e._v(e._s(e.dialogForm.SHA1))])]),e._v(" "),a("el-form-item",{attrs:{label:"SHA256:"}},[a("span",[e._v(e._s(e.dialogForm.SHA256))])]),e._v(" "),a("el-form-item",{attrs:{label:"备注:"}},[a("span",[e._v(e._s(e.dialogForm.note))])])],1),e._v(" "),a("el-table",{staticStyle:{width:"90%","margin-bottom":"30px","margin-top":"30px"},attrs:{stripe:"",border:"",data:e.projectObject.paramter,"span-method":e.objectSpanMethod}},[a("el-table-column",{staticStyle:{width:"200px"},attrs:{prop:"mark",label:"模块名"}}),e._v(" "),a("el-table-column",{staticStyle:{width:"300px"},attrs:{prop:"param_name1",label:"参数名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"param",label:"参数"}})],1),e._v(" "),a("span",[e._v("\n        复制Key表链接:  "),a("el-input",{staticStyle:{"max-width":"100%",width:"900px"},attrs:{placeholder:"Please input",disabled:""},model:{value:e.link,callback:function(t){e.link=t},expression:"link"}}),e._v(" "),a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.link,expression:"link",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.clipboardSuccess,expression:"clipboardSuccess",arg:"success"}],attrs:{type:"primary",icon:"document"}},[e._v("复制")])],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")])],1)],1)],1)},[],!1,null,null,null);m.options.__file="projectconfigtable_publish.vue";t.default=m.exports}}]);