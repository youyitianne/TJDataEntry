(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1239"],{"+ULj":function(e,t,n){"use strict";n.r(t);n("X4fA"),n("lwSp");var a=n("TiqC"),o={name:"DropzoneDemo",data:function(){return{pageSize:20,totalPages:0,currentPage:1,id:0,promoChannel:{},promoChannelState:"add",tableData:[],promoChannelDialogVisible:!1,hidTableData:[],promoChannelName:""}},mounted:function(){this.pageChange(1)},methods:{searchTable:function(){this.pageChange(1)},pageChange:function(e){var t=this;this.currentPage=e;var n=this,o={page:e,limit:this.pageSize,promoChannelName:this.promoChannelName};Object(a.d)(o).then(function(e){3e3===e.repcode?(console.log(e.data),t.tableData=e.data,t.totalPages=e.total):n.$notify({title:"失败",message:"请刷新页面后重试",type:"error",duration:2e3})}).catch(function(e){console.error(e),n.$notify({title:"失败",message:"请刷新页面后重试",type:"error",duration:2e3})})},checkPermission:n("41Be").a,addPromoChannel:function(){var e=this,t=this;this.$refs.promoChannel.validate(function(n){if(!n)return!1;var o={promoChannelName:e.promoChannel.promoChannelName,promoChannelPackage:e.promoChannel.promoChannelPackage,promoChannelMark:e.promoChannel.promoChannelMark,channelRule:e.promoChannel.channelRule};Object(a.a)(o).then(function(n){3e3===n.repcode?(t.$notify({title:"提示",message:"添加渠道成功！",type:"success"}),e.promoChannelDialogVisible=!1,e.initTable()):t.$notify({title:"提示",message:"添加渠道失败，请检查渠道标识是否重复！",type:"warning"})}).catch(function(e){console.error(e),t.$notify({title:"提示",message:"添加渠道失败！",type:"warning"})})})},editPromoChannel:function(){var e=this,t=this;this.$refs.promoChannel.validate(function(n){if(!n)return!1;var o={id:e.id,channelRule:e.promoChannel.channelRule,promoChannelName:e.promoChannel.promoChannelName,promoChannelPackage:e.promoChannel.promoChannelPackage,promoChannelMark:e.promoChannel.promoChannelMark};Object(a.b)(o).then(function(n){3e3===n.repcode?(t.$notify({title:"提示",message:"修改渠道成功！",type:"success"}),e.promoChannelDialogVisible=!1,e.initTable()):t.$notify({title:"提示",message:"修改渠道失败！",type:"warning"})}).catch(function(e){console.error(e),t.$notify({title:"提示",message:"修改渠道失败！",type:"warning"})})})},initTable:function(){var e=this,t=this;Object(a.c)().then(function(n){3e3===n.repcode?(e.totalPages=n.data.length,e.hidTableData=n.data,e.pageChange(e.currentpage)):t.$notify({title:"提示",message:"获取互推渠道列表失败！",type:"warning"})}).catch(function(e){console.error(e),t.$notify({title:"提示",message:"获取互推渠道列表失败！",type:"warning"})})},addPromoChannelBtu:function(){var e=this;this.promoChannel={},this.promoChannel.channelRule="market://details?id={0}",this.$nextTick(function(){e.$refs.promoChannel.clearValidate()}),this.promoChannelState="add",this.promoChannelDialogVisible=!0},editPromoChannelDialog:function(e){this.promoChannel={},this.id=e.id,this.$set(this.promoChannel,"channelRule",e.channelRule),this.$set(this.promoChannel,"promoChannelName",e.promoChannelName),this.$set(this.promoChannel,"promoChannelMark",e.promoChannelMark),this.$set(this.promoChannel,"promoChannelPackage",e.promoChannelPackage),this.promoChannelState="edit",this.promoChannelDialogVisible=!0}}},r=(n("nTdv"),n("KHd+")),l=Object(r.a)(o,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"components-container"},[e.checkPermission(["admin","director"])?n("el-button",{staticStyle:{margin:"20px"},attrs:{type:"primary"},on:{click:e.addPromoChannelBtu}},[e._v("添加")]):e._e(),e._v(" "),n("span",{staticStyle:{"margin-left":"15px","margin-right":"5px"}},[e._v("渠道名:")]),e._v(" "),n("el-input",{staticStyle:{width:"200px"},attrs:{clearable:""},model:{value:e.promoChannelName,callback:function(t){e.promoChannelName=t},expression:"promoChannelName"}}),e._v(" "),n("el-button",{on:{click:e.searchTable}},[e._v("搜索")]),e._v(" "),n("el-card",{staticStyle:{margin:"20px","margin-top":"-10px"},attrs:{shadow:"always"}},[n("el-table",{staticStyle:{width:"100%"},attrs:{height:"700",border:"",data:e.tableData}},[n("el-table-column",{attrs:{label:"序号",type:"index",width:"50"}}),e._v(" "),n("el-table-column",{attrs:{prop:"promoChannelName",label:"渠道名"}}),e._v(" "),n("el-table-column",{attrs:{prop:"promoChannelMark",label:"渠道标识"}}),e._v(" "),n("el-table-column",{attrs:{prop:"promoChannelPackage",label:"渠道包名"}}),e._v(" "),n("el-table-column",{attrs:{prop:"channelRule",label:"跳转规则"}}),e._v(" "),e.checkPermission(["admin","director"])?n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text"},on:{click:function(n){e.editPromoChannelDialog(t.row)}}},[e._v("编辑")])]}}])}):e._e()],1),e._v(" "),n("el-pagination",{attrs:{"page-size":e.pageSize,layout:"prev, pager, next",total:e.totalPages,"current-page":e.currentPage},on:{"current-change":e.pageChange}})],1),e._v(" "),n("el-dialog",{staticStyle:{height:"600px"},attrs:{width:"700px",title:"互推渠道",visible:e.promoChannelDialogVisible},on:{"update:visible":function(t){e.promoChannelDialogVisible=t}}},[n("el-form",{ref:"promoChannel",staticStyle:{"margin-left":"50px"},attrs:{model:e.promoChannel,"label-position":"left","status-icon":""}},[n("el-form-item",{attrs:{label:"渠道名",rules:[{required:!0,message:"渠道名不能为空"}],prop:"promoChannelName","label-width":"120px"}},[n("el-input",{staticClass:"dia-input",attrs:{placeholder:"必填~"},model:{value:e.promoChannel.promoChannelName,callback:function(t){e.$set(e.promoChannel,"promoChannelName",t)},expression:"promoChannel.promoChannelName"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"渠道标识",rules:[{required:!0,message:"渠道标识不能为空"}],prop:"promoChannelMark","label-width":"120px"}},[n("el-input",{staticClass:"dia-input",attrs:{placeholder:"必填~",disabled:"edit"===e.promoChannelState},model:{value:e.promoChannel.promoChannelMark,callback:function(t){e.$set(e.promoChannel,"promoChannelMark",t)},expression:"promoChannel.promoChannelMark"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"渠道包名",rules:[{required:!0,message:"渠道包名不能为空"}],prop:"promoChannelPackage","label-width":"120px"}},[n("el-input",{staticClass:"dia-input",attrs:{placeholder:"必填~"},model:{value:e.promoChannel.promoChannelPackage,callback:function(t){e.$set(e.promoChannel,"promoChannelPackage",t)},expression:"promoChannel.promoChannelPackage"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"跳转规则",rules:[{required:!0,message:"跳转规则不能为空"}],prop:"channelRule","label-width":"120px"}},[n("el-input",{staticClass:"dia-input",attrs:{placeholder:"必填~"},model:{value:e.promoChannel.channelRule,callback:function(t){e.$set(e.promoChannel,"channelRule",t)},expression:"promoChannel.channelRule"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.promoChannelDialogVisible=!1}}},[e._v(e._s("取消"))]),e._v(" "),"add"===e.promoChannelState?n("el-button",{attrs:{type:"primary"},on:{click:e.addPromoChannel}},[e._v(e._s("添加"))]):e._e(),e._v(" "),"edit"===e.promoChannelState?n("el-button",{attrs:{type:"primary"},on:{click:e.editPromoChannel}},[e._v(e._s("修改"))]):e._e()],1)],1)],1)},[],!1,null,"76b46cbe",null);l.options.__file="promoChannel.vue";t.default=l.exports},"41Be":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("Q2AE");function o(e){if(e&&e instanceof Array&&e.length>0){var t=e;return!!(a.a.getters&&a.a.getters.roles).some(function(e){return t.includes(e)})}return!1}},TiqC:function(e,t,n){"use strict";n.d(t,"c",function(){return o}),n.d(t,"a",function(){return r}),n.d(t,"b",function(){return l}),n.d(t,"d",function(){return i});var a=n("t3Un");function o(){return Object(a.a)({url:"/api/system/getPromoChannel",method:"get"})}function r(e){return Object(a.a)({url:"/api/system/addPromoChannel",method:"post",data:e})}function l(e){return Object(a.a)({url:"/api/system/editPromoChannel",method:"patch",data:e})}function i(e){return Object(a.a)({url:"/api/system/getPromoChannel/limit",method:"get",params:e})}},"kmH+":function(e,t,n){},lwSp:function(e,t,n){"use strict";n.d(t,"g",function(){return o}),n.d(t,"a",function(){return r}),n.d(t,"e",function(){return l}),n.d(t,"h",function(){return i}),n.d(t,"b",function(){return s}),n.d(t,"f",function(){return c}),n.d(t,"d",function(){return m}),n.d(t,"c",function(){return h}),n.d(t,"i",function(){return p}),n.d(t,"j",function(){return u}),n.d(t,"k",function(){return d});var a=n("t3Un");function o(){return Object(a.a)({url:"/api/system/getChannelPromoEdit",method:"get"})}function r(e){return Object(a.a)({url:"/api/system/addChannelPromoEdit",method:"post",data:e})}function l(e){return Object(a.a)({url:"/api/system/EditChannelPromoEdit",method:"patch",data:e})}function i(){return Object(a.a)({url:"/api/system/getPromoList",method:"get"})}function s(e){return Object(a.a)({url:"/api/system/addPromoList",method:"post",data:e})}function c(e){return Object(a.a)({url:"/api/system/editPromoList",method:"patch",data:e})}function m(e){return Object(a.a)({url:"/api/system/delPromoList",method:"delete",params:e})}function h(e){return Object(a.a)({url:"/api/system/addPromoListRecord",method:"post",data:e})}function p(e){return Object(a.a)({url:"/api/system/getRowPromoList",method:"get",params:e})}function u(){return Object(a.a)({url:"/qiniufile",method:"get"})}function d(e){return Object(a.a)({url:"/api/system/synchroPromoList",method:"post",data:e})}},nTdv:function(e,t,n){"use strict";var a=n("kmH+");n.n(a).a}}]);